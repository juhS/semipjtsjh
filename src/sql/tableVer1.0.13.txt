------------------------------------------- MEMBER_INFO
DROP TABLE MEMBER_INFO CASCADE CONSTRAINTS;
-------------------- 외래키 없음
CREATE TABLE MEMBER_INFO
(
    MEMBER_ID    VARCHAR2(20) NOT NULL,
    MEMBER_NAME    VARCHAR2(20) NOT NULL,
    DEPT_CODE    VARCHAR2(10) NOT NULL,
    MEMBER_PWD    VARCHAR2(100) NOT NULL,
    MEMBER_EMAIL    VARCHAR2(30) NOT NULL,
    MEMBER_PHONE    VARCHAR2(20) NOT NULL,
    MEMBER_DEPT_CODE    VARCHAR2(30) NOT NULL
);

COMMENT ON COLUMN MEMBER_INFO.MEMBER_ID IS 'ID';

COMMENT ON COLUMN MEMBER_INFO.MEMBER_NAME IS '이름';

COMMENT ON COLUMN MEMBER_INFO.DEPT_CODE IS '구분';

COMMENT ON COLUMN MEMBER_INFO.MEMBER_PWD IS '비밀번호';

COMMENT ON COLUMN MEMBER_INFO.MEMBER_EMAIL IS '이메일주소';

COMMENT ON COLUMN MEMBER_INFO.MEMBER_PHONE IS '연락처';

COMMENT ON COLUMN MEMBER_INFO.MEMBER_DEPT_CODE IS '소속코드';

COMMENT ON TABLE MEMBER_INFO IS '계정정보';

CREATE UNIQUE INDEX 엔터티1_PK ON MEMBER_INFO
( MEMBER_ID );

ALTER TABLE MEMBER_INFO
 ADD CONSTRAINT 엔터티1_PK PRIMARY KEY ( MEMBER_ID )
 USING INDEX 엔터티1_PK;

----------------------------------------- INGREDIENT_CLASSIFICATION
DROP TABLE INGREDIENT_CLASSIFICATION CASCADE CONSTRAINTS;
----------------- 외래키 없음
CREATE TABLE INGREDIENT_CLASSIFICATION
(
    INGREDIENT_CLASS_NAME    VARCHAR2(30) NOT NULL,
    INGREDIENT_CLASS_CODE    VARCHAR2(10) NOT NULL
);

COMMENT ON COLUMN INGREDIENT_CLASSIFICATION.INGREDIENT_CLASS_NAME IS '원재료분류명';

COMMENT ON COLUMN INGREDIENT_CLASSIFICATION.INGREDIENT_CLASS_CODE IS '원재료분류코드';

COMMENT ON TABLE INGREDIENT_CLASSIFICATION IS '원재료분류목록';

CREATE UNIQUE INDEX 엔터티1_PK23 ON INGREDIENT_CLASSIFICATION
( INGREDIENT_CLASS_CODE );

ALTER TABLE INGREDIENT_CLASSIFICATION
 ADD CONSTRAINT 엔터티1_PK23 PRIMARY KEY ( INGREDIENT_CLASS_CODE )
 USING INDEX 엔터티1_PK23;

ALTER TABLE INGREDIENT_CLASSIFICATION
 ADD CONSTRAINT INGREDIENT_CT_CHECK CHECK(INGREDIENT_CLASS_NAME = '원두'
    OR INGREDIENT_CLASS_NAME = '시럽'
    OR INGREDIENT_CLASS_NAME = '파우더'
    OR INGREDIENT_CLASS_NAME = '티'
    OR INGREDIENT_CLASS_NAME = '베이스'
    OR INGREDIENT_CLASS_NAME = '토핑'
    OR INGREDIENT_CLASS_NAME = '소모품'
    OR INGREDIENT_CLASS_NAME = '유제품'
    OR INGREDIENT_CLASS_NAME = '비품'
    OR INGREDIENT_CLASS_NAME = '사이드'
    OR INGREDIENT_CLASS_NAME = '기본');

---------------------------------------- SUPPLIER
DROP TABLE SUPPLIER CASCADE CONSTRAINTS;
------------------------- 외래키 없음
CREATE TABLE SUPPLIER
(
    SUPPLIER_CODE    VARCHAR2(10) NOT NULL,
    CUSTOM_NAME    VARCHAR2(20) NOT NULL,
    SUPPLIER_REP    VARCHAR2(20) NOT NULL,
    SUPPLIER_PHONE    VARCHAR2(20) NOT NULL,
    SUPPLIER_ADDRESS    VARCHAR2(60) NOT NULL,
    SUPPLIER_NUMBER    VARCHAR2(10) NOT NULL,
    SUPPLIER_ENROLL_DATE    VARCHAR2(20) NOT NULL,
    SUPPLIER_EMAIL    VARCHAR2(30) NOT NULL,
    SUPPLIER_ACCOUNT_BANK    VARCHAR2(30) NOT NULL,
    SUPPLIER_ACCOUNT_NUM    VARCHAR2(30) NOT NULL,
    SUPPLIER_FAX    VARCHAR2(20)
);

COMMENT ON COLUMN SUPPLIER.SUPPLIER_CODE IS '거래처코드';

COMMENT ON COLUMN SUPPLIER.CUSTOM_NAME IS '거래처명';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_REP IS '대표자';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_PHONE IS '연락처';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_ADDRESS IS '사업장주소';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_NUMBER IS '사업자번호';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_ENROLL_DATE IS '등록일';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_EMAIL IS '이메일주소';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_ACCOUNT_BANK IS '은행명';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_ACCOUNT_NUM IS '계좌번호';

COMMENT ON COLUMN SUPPLIER.SUPPLIER_FAX IS '팩스번호';

COMMENT ON TABLE SUPPLIER IS '거래처';

CREATE UNIQUE INDEX 엔터티1_PK4 ON SUPPLIER
( SUPPLIER_CODE );

ALTER TABLE SUPPLIER
 ADD CONSTRAINT 엔터티1_PK4 PRIMARY KEY ( SUPPLIER_CODE )
 USING INDEX 엔터티1_PK4;

ALTER TABLE SUPPLIER
 MODIFY (SUPPLIER_ENROLL_DATE DEFAULT SYSDATE);

----------------------------------------------- MENU_CLASSIFICATION
DROP TABLE MENU_CLASSIFICATION CASCADE CONSTRAINTS;
--------------------------- 외래키 없음
CREATE TABLE MENU_CLASSIFICATION
(
    MENU_CLASSIFICATION_CODE    VARCHAR2(10) NOT NULL,
    MENU_CLASSIFICATION_NAME    VARCHAR2(30) NOT NULL
);

COMMENT ON COLUMN MENU_CLASSIFICATION.MENU_CLASSIFICATION_CODE IS '메뉴분류코드';

COMMENT ON COLUMN MENU_CLASSIFICATION.MENU_CLASSIFICATION_NAME IS '메뉴분류명';

COMMENT ON TABLE MENU_CLASSIFICATION IS '메뉴분류목록';

CREATE UNIQUE INDEX 엔터티1_PK49 ON MENU_CLASSIFICATION
( MENU_CLASSIFICATION_CODE );

ALTER TABLE MENU_CLASSIFICATION
 ADD CONSTRAINT 엔터티1_PK49 PRIMARY KEY ( MENU_CLASSIFICATION_CODE )
 USING INDEX 엔터티1_PK49;
 
---------------------------------------- MENU_INFO
DROP TABLE MENU_INFO CASCADE CONSTRAINTS;
--------------------------------------- 외래키 적용 됨
CREATE TABLE MENU_INFO
(
    MENU_NAME    VARCHAR2(30) NOT NULL,
    MENU_CODE    VARCHAR2(10) NOT NULL,
    MENU_PRICE    NUMBER(10) NOT NULL,
    MENU_IMAGE    VARCHAR2(50) NOT NULL,
    MENU_CLASSIFICATION_CODE    VARCHAR2(10) NOT NULL,
    REGISTER_DATE    DATE NOT NULL,
    MENU_STATUS    VARCHAR2(20) NOT NULL,
    MANUFACTURE_COST    NUMBER(10) NOT NULL
);

COMMENT ON COLUMN MENU_INFO.MENU_NAME IS '메뉴명';

COMMENT ON COLUMN MENU_INFO.MENU_CODE IS '메뉴코드';

COMMENT ON COLUMN MENU_INFO.MENU_PRICE IS '판매가';

COMMENT ON COLUMN MENU_INFO.MENU_IMAGE IS '메뉴이미지';

COMMENT ON COLUMN MENU_INFO.MENU_CLASSIFICATION_CODE IS '메뉴분류코드';

COMMENT ON COLUMN MENU_INFO.REGISTER_DATE IS '등록일';

COMMENT ON COLUMN MENU_INFO.MENU_STATUS IS '상태';

COMMENT ON COLUMN MENU_INFO.MANUFACTURE_COST IS '제조원가';

COMMENT ON TABLE MENU_INFO IS '메뉴정보';

CREATE UNIQUE INDEX 엔터티1_PK18 ON MENU_INFO
( MENU_CODE );

ALTER TABLE MENU_INFO
 ADD CONSTRAINT 엔터티1_PK18 PRIMARY KEY ( MENU_CODE )
 USING INDEX 엔터티1_PK18;

ALTER TABLE MENU_INFO
 ADD CONSTRAINT 엔터티1_FK14 FOREIGN KEY (MENU_CLASSIFICATION_CODE)
 REFERENCES MENU_CLASSIFICATION (MENU_CLASSIFICATION_CODE) ON DELETE CASCADE;

ALTER TABLE MENU_INFO
 MODIFY (REGISTER_DATE DEFAULT SYSDATE);

ALTER TABLE MENU_INFO
 MODIFY (MENU_STATUS DEFAULT '판매중');

ALTER TABLE MENU_INFO
 ADD CONSTRAINT MENU_INFO_CHECK CHECK(MENU_STATUS = '판매중' OR MENU_STATUS = '매진' OR MENU_STATUS = '단종');

--------------------------------------------- BASKET
DROP TABLE BASKET CASCADE CONSTRAINTS;
--------------------------------------- 외래키 적용 됨
CREATE TABLE BASKET
(
    BASKET_NUM NUMBER(10) NOT NULL,
    MENU_CODE  VARCHAR(10) NOT NULL,
    MENU_NAME  VARCHAR2(20) NOT NULL,
    MENU_COUNT NUMBER(5) NOT NULL,
    MENU_IMAGE VARCHAR2(50) NOT NULL,
    MENU_EAT VARCHAR2(5) NOT NULL,
    MENU_PRICE NUMBER(10) NOT NULL,
    BRANCH_CODE VARCHAR2(10) NOT NULL
);

COMMENT ON COLUMN BASKET.BASKET_NUM IS '장바구니번호';

COMMENT ON COLUMN BASKET.MENU_NAME IS '메뉴명';

COMMENT ON COLUMN BASKET.MENU_CODE IS '메뉴코드';

COMMENT ON COLUMN BASKET.MENU_PRICE IS '가격';

COMMENT ON COLUMN BASKET.MENU_IMAGE IS '메뉴이미지';

COMMENT ON COLUMN BASKET.MENU_EAT IS '포장OR매장';

COMMENT ON COLUMN BASKET.BRANCH_CODE IS '지점코드';

COMMENT ON TABLE BASKET IS '장바구니';

CREATE UNIQUE INDEX BASKET_PK01 ON BASKET
( BASKET_NUM,MENU_CODE );

ALTER TABLE BASKET
 ADD CONSTRAINT BASKET_PK01 PRIMARY KEY ( BASKET_NUM,MENU_CODE )
 USING INDEX BASKET_PK01;

ALTER TABLE BASKET
 ADD CONSTRAINT BASKET_FK01 FOREIGN KEY (MENU_CODE)
 REFERENCES MENU_INFO (MENU_CODE) ON DELETE CASCADE;

ALTER TABLE BASKET
 ADD CONSTRAINT BASKET_FK02 FOREIGN KEY (BRANCH_CODE)
 REFERENCES BRANCH (BRANCH_CODE) ON DELETE CASCADE;

DROP SEQUENCE SEQ_BASKET_NUM;

CREATE SEQUENCE SEQ_BASKET_NUM;

---------------------------------------- INGREDIENT_INFO
DROP TABLE INGREDIENT_INFO CASCADE CONSTRAINTS;
------------------------- 외래키 적용됨
CREATE TABLE INGREDIENT_INFO
(
    INGREDIENT_CODE    VARCHAR2(10) NOT NULL,
    INGREDIENT_NAME    VARCHAR2(50) NOT NULL,
    INGREDIENT_IMAGE    VARCHAR2(200) NOT NULL,
    IMAGE_ORI           VARCHAR2(200) NOT NULL,
    IMAGE_CHA           VARCHAR2(200) NOT NULL,
    INGREDIENT_UNIT    VARCHAR2(5) NOT NULL,
    STORAGE_TYPE    VARCHAR2(10) NOT NULL,
    INGREDIENT_CAPACITY    NUMBER(10) NOT NULL,
    INGREDIENT_CLASS_CODE    VARCHAR2(10) NOT NULL,
    ISTATUS VARCHAR2(2) NOT NULL
);

COMMENT ON COLUMN INGREDIENT_INFO.INGREDIENT_CODE IS '원재료코드';

COMMENT ON COLUMN INGREDIENT_INFO.INGREDIENT_NAME IS '원재료명';

COMMENT ON COLUMN INGREDIENT_INFO.INGREDIENT_IMAGE IS '원재료이미지';

COMMENT ON COLUMN INGREDIENT_INFO.IMAGE_ORI IS '원래이미지명';

COMMENT ON COLUMN INGREDIENT_INFO.IMAGE_CHA IS '바뀐이미지명';

COMMENT ON COLUMN INGREDIENT_INFO.INGREDIENT_UNIT IS '원재료단위';

COMMENT ON COLUMN INGREDIENT_INFO.STORAGE_TYPE IS '보관방식';

COMMENT ON COLUMN INGREDIENT_INFO.INGREDIENT_CAPACITY IS '구매용량';

COMMENT ON COLUMN INGREDIENT_INFO.INGREDIENT_CLASS_CODE IS '원재료분류코드';

COMMENT ON COLUMN INGREDIENT_INFO.ISTATUS IS '원재료상태';

COMMENT ON TABLE INGREDIENT_INFO IS '원재료정보';

CREATE UNIQUE INDEX 엔터티1_PK3 ON INGREDIENT_INFO
( INGREDIENT_CODE );

ALTER TABLE INGREDIENT_INFO
 ADD CONSTRAINT 엔터티1_PK3 PRIMARY KEY ( INGREDIENT_CODE )
 USING INDEX 엔터티1_PK3;

ALTER TABLE INGREDIENT_INFO
 ADD CONSTRAINT 엔터티1_FK13 FOREIGN KEY (INGREDIENT_CLASS_CODE)
 REFERENCES INGREDIENT_CLASSIFICATION (INGREDIENT_CLASS_CODE) ON DELETE CASCADE;

ALTER TABLE INGREDIENT_INFO
 MODIFY (STORAGE_TYPE DEFAULT '실외');

ALTER TABLE INGREDIENT_INFO
 MODIFY (INGREDIENT_CAPACITY DEFAULT 1000);

ALTER TABLE INGREDIENT_INFO
 MODIFY (ISTATUS DEFAULT 'Y');

ALTER TABLE INGREDIENT_INFO
 ADD CONSTRAINT INGREDIENT_INFO_CHECK CHECK(STORAGE_TYPE = '실온' OR STORAGE_TYPE = '냉장' OR STORAGE_TYPE = '냉동');


------------------------------------------- BOARD TABLE
DROP TABLE BOARD CASCADE CONSTRAINTS;
-------------------- 외래키 적용됨
CREATE TABLE BOARD
(
    BOARD_TITLE    VARCHAR2(100) NOT NULL,
    COMMUNITY_CODE    NUMBER(4) NOT NULL,
    COMMUNITY_NAME  VARCHAR2(15) NOT NULL,
    BOARD_WRITER_ID    VARCHAR2(20) NOT NULL,
    BOARD_WRITE_DATE    DATE,
    BOARD_PUBLIC    VARCHAR2(1),
    BOARD_COUNT    NUMBER(10),
    BOARD_PROCESS    VARCHAR2(1),
    BOARD_CONTENT    VARCHAR2(1000),
    BOARD_NO    NUMBER(20) NOT NULL,
    BOARD_NUM   NUMBER(20) NOT NULL,
    STATUS    VARCHAR2(2) NOT NULL
);

COMMENT ON COLUMN BOARD.BOARD_TITLE IS '제목';

COMMENT ON COLUMN BOARD.COMMUNITY_CODE IS '게시판코드';

COMMENT ON COLUMN BOARD.COMMUNITY_NAME IS '게시판명';

COMMENT ON COLUMN BOARD.BOARD_WRITER_ID IS '작성자ID';

COMMENT ON COLUMN BOARD.BOARD_WRITE_DATE IS '작성일';

COMMENT ON COLUMN BOARD.BOARD_PUBLIC IS '공개여부(Y/N)';

COMMENT ON COLUMN BOARD.BOARD_COUNT IS '조회수';

COMMENT ON COLUMN BOARD.BOARD_PROCESS IS '처리여부(Y/N)';

COMMENT ON COLUMN BOARD.BOARD_CONTENT IS '게시글내용';

COMMENT ON COLUMN BOARD.BOARD_NO IS '게시판번호';

COMMENT ON COLUMN BOARD.BOARD_NUM IS '게시글번호';

COMMENT ON COLUMN BOARD.STATUS IS '상태';

COMMENT ON TABLE BOARD IS '게시판';

CREATE UNIQUE INDEX 엔터티1_PK21 ON BOARD
( BOARD_NO );

ALTER TABLE BOARD
 ADD CONSTRAINT 엔터티1_PK21 PRIMARY KEY ( BOARD_NO )
 USING INDEX 엔터티1_PK21;

ALTER TABLE BOARD
 ADD CONSTRAINT 엔터티1_FK99 FOREIGN KEY (BOARD_WRITER_ID)
 REFERENCES MEMBER_INFO (MEMBER_ID) ON DELETE CASCADE;
 
ALTER TABLE BOARD
 MODIFY (BOARD_WRITE_DATE DEFAULT SYSDATE);

ALTER TABLE BOARD
 MODIFY (BOARD_PUBLIC DEFAULT 'Y');

ALTER TABLE BOARD
 MODIFY (BOARD_PROCESS DEFAULT 'N');

ALTER TABLE BOARD
 MODIFY (BOARD_COUNT DEFAULT 0);

ALTER TABLE BOARD
 MODIFY (STATUS DEFAULT 'Y');
 
ALTER TABLE BOARD
 ADD CONSTRAINT BOARD_CHECK CHECK(COMMUNITY_NAME = '공지사항' OR COMMUNITY_NAME = '자유게시판' OR COMMUNITY_NAME = 'FAQ' OR COMMUNITY_NAME = '질의응답'); 

DROP SEQUENCE SEQ_BOARD_NO; 
CREATE SEQUENCE SEQ_BOARD_NO;

DROP SEQUENCE SEQ_BOARD_NUM1;
CREATE SEQUENCE SEQ_BOARD_NUM1;

DROP SEQUENCE SEQ_BOARD_NUM2;
CREATE SEQUENCE SEQ_BOARD_NUM2;

DROP SEQUENCE SEQ_BOARD_NUM3;
CREATE SEQUENCE SEQ_BOARD_NUM3;

DROP SEQUENCE SEQ_BOARD_NUM4;
CREATE SEQUENCE SEQ_BOARD_NUM4;

-------------------------------- ATTACHMENT

DROP TABLE ATTACHMENT CASCADE CONSTRAINTS;
-------------------- 외래키 적용 됨
CREATE TABLE ATTACHMENT
(
    ATT_NO    NUMBER(10) NOT NULL,
    BOARD_NO    NUMBER(10) NOT NULL,
    ATT_FILE_ORIGIN_NAME    VARCHAR2(50) NOT NULL,
    ATT_FILE_CHANGE_NAME      VARCHAR2(50) NOT NULL,
    ATT_FILE_ADDRESS    VARCHAR2(100) NOT NULL,
    ATT_FILE_SIZE    NUMBER(10) NOT NULL,
    ATT_STATUS   VARCHAR2(2) NOT NULL
);

COMMENT ON COLUMN ATTACHMENT.ATT_NO IS '파일번호';

COMMENT ON COLUMN ATTACHMENT.BOARD_NO IS '게시글번호';

COMMENT ON COLUMN ATTACHMENT.ATT_FILE_ORIGIN_NAME IS '파일명';

COMMENT ON COLUMN ATTACHMENT.ATT_FILE_CHANGE_NAME IS '변경된파일명';

COMMENT ON COLUMN ATTACHMENT.ATT_FILE_ADDRESS IS '경로명';

COMMENT ON COLUMN ATTACHMENT.ATT_FILE_SIZE IS '용량';

COMMENT ON COLUMN ATTACHMENT.ATT_STATUS IS '상태';

COMMENT ON TABLE ATTACHMENT IS '첨부파일';

CREATE UNIQUE INDEX 엔터티1_PK22 ON ATTACHMENT
( ATT_NO );

ALTER TABLE ATTACHMENT
 ADD CONSTRAINT 엔터티1_PK22 PRIMARY KEY ( ATT_NO )
 USING INDEX 엔터티1_PK22;

ALTER TABLE ATTACHMENT
 ADD CONSTRAINT 엔터티1_FK1 FOREIGN KEY (BOARD_NO)
 REFERENCES BOARD (BOARD_NO) ON DELETE CASCADE;
--ALTER TABLE ATTACHMENT
-- DROP CONSTRAINT 엔터티1_FK1;

ALTER TABLE ATTACHMENT
 MODIFY (ATT_STATUS DEFAULT 'Y');

DROP SEQUENCE SEQ_ATTACHMENT_NO;

CREATE SEQUENCE SEQ_ATTACHMENT_NO;

----------------------------------------------------- BRANCH
DROP TABLE BRANCH CASCADE CONSTRAINTS;
------------------ 외래키 없음
CREATE TABLE BRANCH
(
    BRANCH_CODE    VARCHAR2(10) NOT NULL,
    BRANCH_NAME    VARCHAR2(20) NOT NULL,
    BRANCH_ADDRESS    VARCHAR2(50) NOT NULL,
    BRANCH_PHONE    VARCHAR2(20) NOT NULL
);

COMMENT ON COLUMN BRANCH.BRANCH_CODE IS '지점코드';

COMMENT ON COLUMN BRANCH.BRANCH_NAME IS '지점명';

COMMENT ON COLUMN BRANCH.BRANCH_ADDRESS IS '주소';

COMMENT ON COLUMN BRANCH.BRANCH_PHONE IS '연락처';

COMMENT ON TABLE BRANCH IS '지점정보';

CREATE UNIQUE INDEX 엔터티1_PK24 ON BRANCH
( BRANCH_CODE );

ALTER TABLE BRANCH
 ADD CONSTRAINT 엔터티1_PK24 PRIMARY KEY ( BRANCH_CODE )
 USING INDEX 엔터티1_PK24;

---------------------------------------------------- BRANCH_PURCHASE_DOCUMENT
DROP TABLE BRANCH_PURCHASE_DOCUMENT CASCADE CONSTRAINTS;
---------------------외래키 전부 됨
CREATE TABLE BRANCH_PURCHASE_DOCUMENT
(
    BRANCH_PURCHASE_CODE NUMBER(35) NOT NULL,
    BRANCH_DATE DATE NOT NULL,
    SUPPLIER_CODE VARCHAR2(10) NOT NULL
);

COMMENT ON COLUMN BRANCH_PURCHASE_DOCUMENT.BRANCH_PURCHASE_CODE IS '지점발주번호';

COMMENT ON COLUMN BRANCH_PURCHASE_DOCUMENT.BRANCH_DATE IS '지점발주날짜';

COMMENT ON COLUMN BRANCH_PURCHASE_DOCUMENT.SUPPLIER_CODE IS '거래처코드';

COMMENT ON TABLE BRANCH_PURCHASE_DOCUMENT IS '지점발주서';

ALTER TABLE BRANCH_PURCHASE_DOCUMENT ADD (ORDER_STATUS varchar (5) DEFAULT 'N');
COMMENT ON COLUMN BRANCH_PURCHASE_DOCUMENT.ORDER_STATUS IS '발주상태';
ALTER TABLE BRANCH_PURCHASE_DOCUMENT ADD CONSTRAINT BPD_CHECK CHECK (ORDER_STATUS IN ('Y', 'N'));

CREATE UNIQUE INDEX BRANCH_P_D_INDEX ON BRANCH_PURCHASE_DOCUMENT
( BRANCH_PURCHASE_CODE );

ALTER TABLE BRANCH_PURCHASE_DOCUMENT
 ADD CONSTRAINT BRANCH_P_D_PK PRIMARY KEY ( BRANCH_PURCHASE_CODE )
 USING INDEX BRANCH_P_D_INDEX;

ALTER TABLE BRANCH_PURCHASE_DOCUMENT
 ADD CONSTRAINT  BRANCH_P_D_FK3 FOREIGN KEY (SUPPLIER_CODE)
 REFERENCES SUPPLIER (SUPPLIER_CODE) ON DELETE CASCADE;

ALTER TABLE BRANCH_PURCHASE_DOCUMENT
 MODIFY (BRANCH_DATE DEFAULT SYSDATE);

DROP SEQUENCE SEQ_BRANCH_P_CODE;

CREATE SEQUENCE SEQ_BRANCH_P_CODE START WITH 100001;

---------------------------------------------------- BRANCH_PURCHASE_HISTORY
DROP TABLE BRANCH_PURCHASE_HISTORY CASCADE CONSTRAINTS;
---------------------외래키 전부 됨
CREATE TABLE BRANCH_PURCHASE_HISTORY
(
    BRANCH_PURCHASE_CODE NUMBER(35) NOT NULL,
    INGREDIENT_CODE    VARCHAR2(10) NOT NULL,
    PURCHASE_QUANTITY    NUMBER(10) NOT NULL,
    PURCHASE_UNIT    VARCHAR2(5) NOT NULL,
    BRANCH_CODE    VARCHAR2(10) NOT NULL
);
COMMENT ON COLUMN BRANCH_PURCHASE_HISTORY.BRANCH_PURCHASE_CODE IS '지점발주번호';

COMMENT ON COLUMN BRANCH_PURCHASE_HISTORY.INGREDIENT_CODE IS '원재료코드';

COMMENT ON COLUMN BRANCH_PURCHASE_HISTORY.PURCHASE_QUANTITY IS '지점발주수량';

COMMENT ON COLUMN BRANCH_PURCHASE_HISTORY.PURCHASE_UNIT IS '지점발주단위';

COMMENT ON COLUMN BRANCH_PURCHASE_HISTORY.BRANCH_CODE IS '지점코드';

COMMENT ON TABLE BRANCH_PURCHASE_HISTORY IS '지점발주원재료목록';

CREATE UNIQUE INDEX 엔터티1_PK43 ON BRANCH_PURCHASE_HISTORY
( BRANCH_PURCHASE_CODE,INGREDIENT_CODE,BRANCH_CODE );

ALTER TABLE BRANCH_PURCHASE_HISTORY
 ADD CONSTRAINT 엔터티1_PK43 PRIMARY KEY ( BRANCH_PURCHASE_CODE,INGREDIENT_CODE,BRANCH_CODE )
 USING INDEX 엔터티1_PK43;

ALTER TABLE BRANCH_PURCHASE_HISTORY
 ADD CONSTRAINT BRANCH_P_H1 FOREIGN KEY (BRANCH_PURCHASE_CODE)
 REFERENCES BRANCH_PURCHASE_DOCUMENT (BRANCH_PURCHASE_CODE) ON DELETE CASCADE;

ALTER TABLE BRANCH_PURCHASE_HISTORY
 ADD CONSTRAINT 엔터티1_FK3 FOREIGN KEY (INGREDIENT_CODE)
 REFERENCES INGREDIENT_INFO (INGREDIENT_CODE) ON DELETE CASCADE;
 
 ALTER TABLE BRANCH_PURCHASE_HISTORY
 ADD CONSTRAINT 엔터티1_FK5 FOREIGN KEY (BRANCH_CODE)
 REFERENCES BRANCH (BRANCH_CODE) ON DELETE CASCADE;

ALTER TABLE BRANCH_PURCHASE_HISTORY
 MODIFY (PURCHASE_QUANTITY DEFAULT 0);

----------------------------------------------------- HO_PURCHASE_HISTORY
DROP TABLE HO_PURCHASE_HISTORY CASCADE CONSTRAINTS;
----------------------- 외래키 적용 됨
CREATE TABLE HO_PURCHASE_HISTORY
(
    PURCHASE_CODE NUMBER(35) NOT NULL,
    BRANCH_PURCHASE_CODE NUMBER(35) NOT NULL,
    ORDER_DATE    DATE NOT NULL,
    PAYMENT_COST    VARCHAR2(10) NOT NULL,
    PAYMENT_DUE_DATE    VARCHAR2(20) NOT NULL,
    PAYMENT_TERMS    VARCHAR2(100) NOT NULL,
    PURCHASE_STATUS VARCHAR2(2) NOT NULL
);

COMMENT ON COLUMN HO_PURCHASE_HISTORY.PURCHASE_CODE IS '발주번호';

COMMENT ON COLUMN HO_PURCHASE_HISTORY.BRANCH_PURCHASE_CODE IS '지점발주번호';

COMMENT ON COLUMN HO_PURCHASE_HISTORY.ORDER_DATE IS '발주일자';

COMMENT ON COLUMN HO_PURCHASE_HISTORY.PAYMENT_COST IS '결제금액';

COMMENT ON COLUMN HO_PURCHASE_HISTORY.PAYMENT_DUE_DATE IS '납기일';

COMMENT ON COLUMN HO_PURCHASE_HISTORY.PAYMENT_TERMS IS '대금결제조건';

COMMENT ON COLUMN HO_PURCHASE_HISTORY.PURCHASE_STATUS IS '발주상태';

COMMENT ON TABLE HO_PURCHASE_HISTORY IS '본사발주이력';

CREATE UNIQUE INDEX 엔터티1_PK40 ON HO_PURCHASE_HISTORY
( PURCHASE_CODE,BRANCH_PURCHASE_CODE,ORDER_DATE );

ALTER TABLE HO_PURCHASE_HISTORY
 ADD CONSTRAINT 엔터티1_PK40 PRIMARY KEY ( PURCHASE_CODE,BRANCH_PURCHASE_CODE,ORDER_DATE )
 USING INDEX 엔터티1_PK40;

ALTER TABLE HO_PURCHASE_HISTORY
 ADD CONSTRAINT HO_PURCHASE_HISTORY FOREIGN KEY (BRANCH_PURCHASE_CODE)
 REFERENCES BRANCH_PURCHASE_DOCUMENT (BRANCH_PURCHASE_CODE) ON DELETE CASCADE;

ALTER TABLE HO_PURCHASE_HISTORY
 MODIFY (ORDER_DATE DEFAULT SYSDATE);

ALTER TABLE HO_PURCHASE_HISTORY
 MODIFY (PAYMENT_DUE_DATE DEFAULT SYSDATE);

ALTER TABLE HO_PURCHASE_HISTORY
 MODIFY (PURCHASE_STATUS DEFAULT 'N');

--DROP SEQUENCE SEQ_PURCHASE_CODE;
--
--CREATE SEQUENCE SEQ_PURCHASE_CODE START WITH 10001;
 
---------------------------------------- BRANCH_SALES_MENU
DROP TABLE BRANCH_SALES_MENU CASCADE CONSTRAINTS;
------------------------- 외래키 적용됨
CREATE TABLE BRANCH_SALES_MENU
(
    MENU_CODE    VARCHAR2(10) NOT NULL,
    BRANCH_CODE    VARCHAR2(10) NOT NULL,
    STATUS       VARCHAR2(15) NOT NULL
);

COMMENT ON COLUMN BRANCH_SALES_MENU.MENU_CODE IS '메뉴코드';

COMMENT ON COLUMN BRANCH_SALES_MENU.BRANCH_CODE IS '지점코드';

COMMENT ON COLUMN BRANCH_SALES_MENU.STATUS IS '상태';

COMMENT ON TABLE BRANCH_SALES_MENU IS '지점별판매메뉴';

CREATE UNIQUE INDEX 엔터티1_PK12 ON BRANCH_SALES_MENU
( BRANCH_CODE,MENU_CODE );

ALTER TABLE BRANCH_SALES_MENU
 ADD CONSTRAINT B_S_M_CK CHECK(STATUS = '판매중' OR STATUS = '단종' OR STATUS = '매진');

ALTER TABLE BRANCH_SALES_MENU
 ADD CONSTRAINT 엔터티1_PK12 PRIMARY KEY ( BRANCH_CODE,MENU_CODE )
 USING INDEX 엔터티1_PK12;

ALTER TABLE BRANCH_SALES_MENU
 ADD CONSTRAINT 엔터티1_FK8 FOREIGN KEY (BRANCH_CODE)
 REFERENCES BRANCH (BRANCH_CODE) ON DELETE CASCADE;
 
ALTER TABLE BRANCH_SALES_MENU
 ADD CONSTRAINT 엔터티1_FK9 FOREIGN KEY (MENU_CODE)
 REFERENCES MENU_INFO (MENU_CODE) ON DELETE CASCADE;
 
--------------------------------------------- COMMENT_INFO
DROP TABLE COMMENT_INFO CASCADE CONSTRAINTS;
-------------------------- 외래키 됨
CREATE TABLE COMMENT_INFO
(
    COMMUNITY_CODE    NUMBER(4) NOT NULL,
    COMMENT_CONTENT    VARCHAR2(500) NOT NULL,
    COMMENT_WRITE_DATE    DATE NOT NULL,
    BOARD_NO    NUMBER(10) NOT NULL,
    COMMENT_NO    NUMBER(10) NOT NULL,
    COMMENT_WRITER_ID    VARCHAR2(20) NOT NULL
);

COMMENT ON COLUMN COMMENT_INFO.COMMUNITY_CODE IS '게시판코드';

COMMENT ON COLUMN COMMENT_INFO.COMMENT_CONTENT IS '내용';

COMMENT ON COLUMN COMMENT_INFO.COMMENT_WRITE_DATE IS '작성일';

COMMENT ON COLUMN COMMENT_INFO.BOARD_NO IS '게시글번호';

COMMENT ON COLUMN COMMENT_INFO.COMMENT_NO IS '댓글번호';

COMMENT ON COLUMN COMMENT_INFO.COMMENT_WRITER_ID IS '작성자아이디';

COMMENT ON TABLE COMMENT_INFO IS '댓글';

CREATE UNIQUE INDEX 엔터티1_PK15 ON COMMENT_INFO
( COMMENT_NO );

ALTER TABLE COMMENT_INFO
 ADD CONSTRAINT 엔터티1_PK15 PRIMARY KEY ( COMMENT_NO )
 USING INDEX 엔터티1_PK15;

ALTER TABLE COMMENT_INFO
 ADD CONSTRAINT 엔터티1_FK10 FOREIGN KEY (BOARD_NO)
 REFERENCES BOARD (BOARD_NO) ON DELETE CASCADE;

ALTER TABLE COMMENT_INFO
 ADD CONSTRAINT 엔터티1_FK11 FOREIGN KEY (COMMENT_WRITER_ID)
 REFERENCES MEMBER_INFO (MEMBER_ID) ON DELETE CASCADE;

ALTER TABLE COMMENT_INFO
 MODIFY (COMMENT_WRITE_DATE DEFAULT SYSDATE);

DROP SEQUENCE SEQ_COMMENT_NO;
 
CREATE SEQUENCE SEQ_COMMENT_NO;

------------------------------------- KIOSK
DROP TABLE KIOSK CASCADE CONSTRAINTS;
--------------------- 외래키 적용 됨
CREATE TABLE KIOSK
(
    KIOSK_CODE    VARCHAR2(10) NOT NULL,
    MEMBER_DEPT_CODE    VARCHAR2(10) NOT NULL
);

COMMENT ON COLUMN KIOSK.KIOSK_CODE IS '키오스크코드';

COMMENT ON COLUMN KIOSK.MEMBER_DEPT_CODE IS '소속지점코드';

COMMENT ON TABLE KIOSK IS '키오스크';

CREATE UNIQUE INDEX 엔터티1_PK27 ON KIOSK
( KIOSK_CODE );

ALTER TABLE KIOSK
 ADD CONSTRAINT 엔터티1_PK27 PRIMARY KEY ( KIOSK_CODE )
 USING INDEX 엔터티1_PK27;

ALTER TABLE KIOSK
 ADD CONSTRAINT 엔터티1_FK28 FOREIGN KEY (MEMBER_DEPT_CODE)
 REFERENCES BRANCH (BRANCH_CODE) ON DELETE CASCADE;

----------------------------------------- ORDER_HISTORY
DROP TABLE ORDER_HISTORY CASCADE CONSTRAINTS;
--------------------- 외래키 적용됨
CREATE TABLE ORDER_HISTORY
(
    ORDER_DATE    DATE NOT NULL,
    ORDER_NO    NUMBER(10) NOT NULL,
    KIOSK_CODE    VARCHAR2(10) NOT NULL,
    TOGO    VARCHAR2(1) NOT NULL,
    GROSS_INCOME NUMBER(20) NOT NULL,
    DISCOUNT_INCOME NUMBER(20) NOT NULL,
    TOTAL_INCOME NUMBER(20) NOT NULL
    
);

COMMENT ON COLUMN ORDER_HISTORY.ORDER_DATE IS '주문일자';

COMMENT ON COLUMN ORDER_HISTORY.ORDER_NO IS '주문번호';

COMMENT ON COLUMN ORDER_HISTORY.KIOSK_CODE IS '키오스크코드';

COMMENT ON COLUMN ORDER_HISTORY.TOGO IS '포장여부(Y/N)';

COMMENT ON COLUMN ORDER_HISTORY.GROSS_INCOME IS '판매금액(할인전)';

COMMENT ON COLUMN ORDER_HISTORY.DISCOUNT_INCOME IS '할인금액';

COMMENT ON COLUMN ORDER_HISTORY.TOTAL_INCOME IS '결제금액(할인후)';

COMMENT ON TABLE ORDER_HISTORY IS '주문내역';

CREATE UNIQUE INDEX 엔터티1_PK36 ON ORDER_HISTORY
( ORDER_NO );

ALTER TABLE ORDER_HISTORY
 ADD CONSTRAINT 엔터티1_PK36 PRIMARY KEY ( ORDER_NO )
 USING INDEX 엔터티1_PK36;

ALTER TABLE ORDER_HISTORY
 ADD CONSTRAINT 엔터티1_FK15 FOREIGN KEY (KIOSK_CODE)
 REFERENCES KIOSK (KIOSK_CODE) ON DELETE CASCADE;

ALTER TABLE ORDER_HISTORY
 MODIFY (ORDER_DATE DEFAULT SYSDATE);

ALTER TABLE ORDER_HISTORY
 MODIFY (ORDER_NO DEFAULT 0);

ALTER TABLE ORDER_HISTORY
 MODIFY (TOGO DEFAULT 'N');

DROP SEQUENCE SEQ_ORDER_NO;

CREATE SEQUENCE SEQ_ORDER_NO;

----------------------------------------- ORDER_DETAIL
DROP TABLE ORDER_DETAIL CASCADE CONSTRAINTS;
------------------- 외래키 됨
CREATE TABLE ORDER_DETAIL
(
    MENU_CODE    VARCHAR2(10) NOT NULL,
    ORDER_QUANTITY    NUMBER(10) NOT NULL,
    ORDER_NO    NUMBER(10) NOT NULL,
    ORDER_NUMBER    NUMBER(10) NOT NULL,
    ORDER_STATUS    VARCHAR2(20),
    ORDER_PRICE    NUMBER(10)
);

COMMENT ON COLUMN ORDER_DETAIL.MENU_CODE IS '메뉴코드';

COMMENT ON COLUMN ORDER_DETAIL.ORDER_QUANTITY IS '수량';

COMMENT ON COLUMN ORDER_DETAIL.ORDER_NO IS '차례';

COMMENT ON COLUMN ORDER_DETAIL.ORDER_NUMBER IS '주문번호';

COMMENT ON COLUMN ORDER_DETAIL.ORDER_STATUS IS '상태';

COMMENT ON COLUMN ORDER_DETAIL.ORDER_PRICE IS '가격';

COMMENT ON TABLE ORDER_DETAIL IS '주문내역상세';

CREATE UNIQUE INDEX 엔터티1_PK38 ON ORDER_DETAIL
( ORDER_NO );

ALTER TABLE ORDER_DETAIL
 ADD CONSTRAINT 엔터티1_PK38 PRIMARY KEY ( ORDER_NO )
 USING INDEX 엔터티1_PK38;

ALTER TABLE ORDER_DETAIL
 ADD CONSTRAINT 엔터티1_FK16 FOREIGN KEY (ORDER_NUMBER)
 REFERENCES ORDER_HISTORY (ORDER_NO) ON DELETE CASCADE;

ALTER TABLE ORDER_DETAIL
 ADD CONSTRAINT 엔터티1_FK17 FOREIGN KEY (MENU_CODE)
 REFERENCES MENU_INFO (MENU_CODE) ON DELETE CASCADE;

ALTER TABLE ORDER_DETAIL
 MODIFY (ORDER_QUANTITY DEFAULT 1);

ALTER TABLE ORDER_DETAIL
 MODIFY (ORDER_STATUS DEFAULT '주문완료');

ALTER TABLE ORDER_DETAIL
 ADD CONSTRAINT ORDER_DETAIL_CHECK CHECK(ORDER_STATUS = '주문완료' OR ORDER_STATUS = '제조완료' OR ORDER_STATUS = '전달완료');

DROP SEQUENCE SEQ_ORDER_DETAIL_NO;

CREATE SEQUENCE SEQ_ORDER_DETAIL_NO;
--ALTER TABLE ORDER_DETAIL DROP CONSTRAINT ORDER_DETAIL_CHECK; 제약조건 삭제

--------------------------------------- RECIPE
DROP TABLE RECIPE CASCADE CONSTRAINTS;
--------------------------- 외래키 다 됨
CREATE TABLE RECIPE
(
    MENU_CODE    VARCHAR2(10) NOT NULL,
    INGREDIENT_CODE    VARCHAR2(10) NOT NULL,
    MANUFACTURE_CAPACITY    VARCHAR2(10) NOT NULL,
    INGREDIENT_UNIT    VARCHAR2(5) NOT NULL,
    MENU_COST    NUMBER(10) NOT NULL
);

COMMENT ON COLUMN RECIPE.MENU_CODE IS '메뉴코드';

COMMENT ON COLUMN RECIPE.INGREDIENT_CODE IS '원재료코드';

COMMENT ON COLUMN RECIPE.MANUFACTURE_CAPACITY IS '제조용량';

COMMENT ON COLUMN RECIPE.INGREDIENT_UNIT IS '원재료단위';

COMMENT ON COLUMN RECIPE.MENU_COST IS '원재료단가';

COMMENT ON TABLE RECIPE IS '레시피';

CREATE UNIQUE INDEX 엔터티1_PK13 ON RECIPE
( MENU_CODE,INGREDIENT_CODE );

ALTER TABLE RECIPE
 ADD CONSTRAINT 엔터티1_PK13 PRIMARY KEY ( MENU_CODE,INGREDIENT_CODE )
 USING INDEX 엔터티1_PK13;

ALTER TABLE RECIPE
 ADD CONSTRAINT 엔터티1_FK18 FOREIGN KEY (MENU_CODE)
 REFERENCES MENU_INFO (MENU_CODE) ON DELETE CASCADE;

ALTER TABLE RECIPE
 ADD CONSTRAINT 엔터티1_FK19 FOREIGN KEY (INGREDIENT_CODE)
 REFERENCES INGREDIENT_INFO (INGREDIENT_CODE) ON DELETE CASCADE;

---------------------------------------- SUPPLIER_INGREDIENT
DROP TABLE SUPPLIER_INGREDIENT CASCADE CONSTRAINTS;
--------------------- 외래키 적용 됨
CREATE TABLE SUPPLIER_INGREDIENT
(
    SUPPLIER_CODE    VARCHAR2(10) NOT NULL,
    INGREDIENT_CODE    VARCHAR2(10) NOT NULL,
    MIN_ORDER    NUMBER(10) NOT NULL,
    MAX_ORDER    NUMBER(10) NOT NULL,
    NORMAL_PRICE    NUMBER(10) NOT NULL,
    ABNORMAL_PRICE    NUMBER(10) NOT NULL
);

COMMENT ON COLUMN SUPPLIER_INGREDIENT.SUPPLIER_CODE IS '거래처코드';

COMMENT ON COLUMN SUPPLIER_INGREDIENT.INGREDIENT_CODE IS '원재료코드';

COMMENT ON COLUMN SUPPLIER_INGREDIENT.MIN_ORDER IS '최소주문량';

COMMENT ON COLUMN SUPPLIER_INGREDIENT.MAX_ORDER IS '최대주문량';

COMMENT ON COLUMN SUPPLIER_INGREDIENT.NORMAL_PRICE IS '단가1';

COMMENT ON COLUMN SUPPLIER_INGREDIENT.ABNORMAL_PRICE IS '단가2';

COMMENT ON TABLE SUPPLIER_INGREDIENT IS '거래처 취급품목';

CREATE UNIQUE INDEX 엔터티1_PK9 ON SUPPLIER_INGREDIENT
( SUPPLIER_CODE,INGREDIENT_CODE );

ALTER TABLE SUPPLIER_INGREDIENT
 ADD CONSTRAINT 엔터티1_PK9 PRIMARY KEY ( SUPPLIER_CODE,INGREDIENT_CODE )
 USING INDEX 엔터티1_PK9;

ALTER TABLE SUPPLIER_INGREDIENT
 ADD CONSTRAINT 엔터티1_FK20 FOREIGN KEY (SUPPLIER_CODE)
 REFERENCES SUPPLIER (SUPPLIER_CODE) ON DELETE CASCADE;
 
ALTER TABLE SUPPLIER_INGREDIENT
 ADD CONSTRAINT 엔터티1_FK21 FOREIGN KEY (INGREDIENT_CODE)
 REFERENCES INGREDIENT_INFO (INGREDIENT_CODE) ON DELETE CASCADE;

ALTER TABLE SUPPLIER_INGREDIENT
 MODIFY (MIN_ORDER DEFAULT 1);

ALTER TABLE SUPPLIER_INGREDIENT
 MODIFY (MAX_ORDER DEFAULT 2);

------------------------------------------ HEADOFFICE
DROP TABLE HEADOFFICE CASCADE CONSTRAINTS;
------------------------ 외래키 없음
CREATE TABLE HEADOFFICE
(
    HO_INFO    VARCHAR2(10) NOT NULL,
    HO_NAME    VARCHAR2(50) NOT NULL,
    HO_REP_NAME    VARCHAR2(20) NOT NULL,
    HO_PHONE    VARCHAR2(20) NOT NULL,
    HO_ADDRESS    VARCHAR2(50) NOT NULL,
    HO_NO    VARCHAR2(10) NOT NULL
);

COMMENT ON COLUMN HEADOFFICE.HO_INFO IS '본사코드';

COMMENT ON COLUMN HEADOFFICE.HO_NAME IS '회사명';

COMMENT ON COLUMN HEADOFFICE.HO_REP_NAME IS '대표자명';

COMMENT ON COLUMN HEADOFFICE.HO_PHONE IS '대표연락처';

COMMENT ON COLUMN HEADOFFICE.HO_ADDRESS IS '사업장주소';

COMMENT ON COLUMN HEADOFFICE.HO_NO IS '사업자번호';

COMMENT ON TABLE HEADOFFICE IS '본사정보';

CREATE UNIQUE INDEX 엔터티1_PK26 ON HEADOFFICE
( HO_INFO );

ALTER TABLE HEADOFFICE
 ADD CONSTRAINT 엔터티1_PK26 PRIMARY KEY ( HO_INFO )
 USING INDEX 엔터티1_PK26;

---------------------------------------- ALL_INVEN_HISTORY
DROP TABLE ALL_INVEN_HISTORY CASCADE CONSTRAINTS;
------------------------- 외래키 적용 됨
CREATE TABLE ALL_INVEN_HISTORY
(
    INGREDIENT_QUANTITY    NUMBER(10) NOT NULL,
    BARCODE VARCHAR2(100) NOT NULL,
    SEQUENCE_ADD NUMBER(20) NOT NULL,
    UPDATE_DATE DATE NOT NULL,
    MENU_QUANTITY    NUMBER(10),
    INVEN_TYPE    VARCHAR2(20) NOT NULL,
    ORDER_NO    NUMBER(10),
    INGREDIENT_CODE VARCHAR2(10) NOT NULL,
    BRANCH_CODE VARCHAR2(10) NOT NULL,
    SUPPLIER_CODE VARCHAR2(10) NOT NULL
);

COMMENT ON COLUMN ALL_INVEN_HISTORY.INGREDIENT_QUANTITY IS '원재료수량';

COMMENT ON COLUMN ALL_INVEN_HISTORY.BARCODE IS '바코드(원재료코드+제조일자+유효일+유통기한)';

COMMENT ON COLUMN ALL_INVEN_HISTORY.SEQUENCE_ADD IS '재고이력추가순서';

COMMENT ON COLUMN ALL_INVEN_HISTORY.UPDATE_DATE IS '처리일자';

COMMENT ON COLUMN ALL_INVEN_HISTORY.MENU_QUANTITY IS '메뉴수량';

COMMENT ON COLUMN ALL_INVEN_HISTORY.INVEN_TYPE IS '재고분류';

COMMENT ON COLUMN ALL_INVEN_HISTORY.ORDER_NO IS '주문번호';

COMMENT ON COLUMN ALL_INVEN_HISTORY.INGREDIENT_CODE IS '원재료코드';

COMMENT ON COLUMN ALL_INVEN_HISTORY.BRANCH_CODE IS '지점코드';

COMMENT ON COLUMN ALL_INVEN_HISTORY.SUPPLIER_CODE IS '거래처코드';

COMMENT ON TABLE ALL_INVEN_HISTORY IS '전체재고이력';

CREATE UNIQUE INDEX 엔터티1_PK33 ON ALL_INVEN_HISTORY
( SEQUENCE_ADD );

ALTER TABLE ALL_INVEN_HISTORY
 ADD CONSTRAINT 엔터티1_PK33 PRIMARY KEY ( SEQUENCE_ADD )
 USING INDEX 엔터티1_PK33;

ALTER TABLE ALL_INVEN_HISTORY
 ADD CONSTRAINT 엔터티1_FK22 FOREIGN KEY (ORDER_NO)
 REFERENCES ORDER_HISTORY (ORDER_NO) ON DELETE CASCADE;

ALTER TABLE ALL_INVEN_HISTORY
 ADD CONSTRAINT 엔터티1_FK23 FOREIGN KEY (INGREDIENT_CODE)
 REFERENCES INGREDIENT_INFO (INGREDIENT_CODE) ON DELETE CASCADE;

ALTER TABLE ALL_INVEN_HISTORY
 ADD CONSTRAINT 엔터티1_FK24 FOREIGN KEY (BRANCH_CODE)
 REFERENCES BRANCH (BRANCH_CODE) ON DELETE CASCADE;

ALTER TABLE ALL_INVEN_HISTORY
 ADD CONSTRAINT 엔터티1_FK25 FOREIGN KEY (SUPPLIER_CODE)
 REFERENCES SUPPLIER (SUPPLIER_CODE) ON DELETE CASCADE;

ALTER TABLE ALL_INVEN_HISTORY
 MODIFY (INGREDIENT_QUANTITY DEFAULT 1);

ALTER TABLE ALL_INVEN_HISTORY
 MODIFY (UPDATE_DATE DEFAULT SYSDATE);

ALTER TABLE ALL_INVEN_HISTORY
 MODIFY (MENU_QUANTITY DEFAULT 0);

ALTER TABLE ALL_INVEN_HISTORY
 ADD CONSTRAINT ALL_INVEN_HISTORY_CHECK CHECK(INVEN_TYPE = '입고' OR INVEN_TYPE = '출구' OR INVEN_TYPE = '제조실수' OR INVEN_TYPE = '폐기' OR INVEN_TYPE = '기타');

DROP SEQUENCE SEQ_SEQUENCE_ADD;

CREATE SEQUENCE SEQ_SEQUENCE_ADD;

------------------------------------------- BRANCH_INVEN_LIST
DROP TABLE BRANCH_INVEN_LIST CASCADE CONSTRAINTS;
------------------------ 외래키 적용 됨
CREATE TABLE BRANCH_INVEN_LIST
(
    INVEN_DATE DATE NOT NULL,
    INGREDIENT_CODE    VARCHAR2(10) NOT NULL,
    HOLD_QUANTITY    NUMBER(10) NOT NULL,
    BRANCH_CODE    VARCHAR2(10) NOT NULL,
    MIN_HOLD_QUANTITY    NUMBER(10) NOT NULL,
    INGREDIENT_UNIT    VARCHAR2(5) NOT NULL,
    SUPPLIER_CODE    VARCHAR2(10) NOT NULL
);

COMMENT ON COLUMN BRANCH_INVEN_LIST.INVEN_DATE IS '재고날짜';

COMMENT ON COLUMN BRANCH_INVEN_LIST.INGREDIENT_CODE IS '원재료코드';

COMMENT ON COLUMN BRANCH_INVEN_LIST.HOLD_QUANTITY IS '현재수량';

COMMENT ON COLUMN BRANCH_INVEN_LIST.BRANCH_CODE IS '지점코드';

COMMENT ON COLUMN BRANCH_INVEN_LIST.MIN_HOLD_QUANTITY IS '최소보유수량';

COMMENT ON COLUMN BRANCH_INVEN_LIST.INGREDIENT_UNIT IS '원재료단위';

COMMENT ON COLUMN BRANCH_INVEN_LIST.SUPPLIER_CODE IS '거래처코드';

COMMENT ON TABLE BRANCH_INVEN_LIST IS '지점별재고목록';

CREATE UNIQUE INDEX 엔터티1_PK30 ON BRANCH_INVEN_LIST
( BRANCH_CODE,INGREDIENT_CODE,SUPPLIER_CODE );

ALTER TABLE BRANCH_INVEN_LIST
 ADD CONSTRAINT 엔터티1_PK30 PRIMARY KEY ( BRANCH_CODE,INGREDIENT_CODE,SUPPLIER_CODE )
 USING INDEX 엔터티1_PK30;

ALTER TABLE BRANCH_INVEN_LIST
 ADD CONSTRAINT 엔터티1_FK26 FOREIGN KEY (BRANCH_CODE)
 REFERENCES BRANCH (BRANCH_CODE) ON DELETE CASCADE;

ALTER TABLE BRANCH_INVEN_LIST
 ADD CONSTRAINT 엔터티1_FK27 FOREIGN KEY (INGREDIENT_CODE)
 REFERENCES INGREDIENT_INFO (INGREDIENT_CODE) ON DELETE CASCADE;

ALTER TABLE BRANCH_INVEN_LIST
 ADD CONSTRAINT B_I_L_FK FOREIGN KEY (SUPPLIER_CODE)
 REFERENCES SUPPLIER (SUPPLIER_CODE) ON DELETE CASCADE;

ALTER TABLE BRANCH_INVEN_LIST
 MODIFY (INVEN_DATE DEFAULT SYSDATE);

ALTER TABLE BRANCH_INVEN_LIST
 MODIFY (HOLD_QUANTITY DEFAULT 0);

ALTER TABLE BRANCH_INVEN_LIST
 MODIFY (MIN_HOLD_QUANTITY DEFAULT 1);

COMMIT;

 